!function($,t,e,n){function i(){for(var e=0,n=["ms","moz","webkit","o"],i=0;i<n.length&&!t.requestAnimationFrame;++i)t.requestAnimationFrame=t[n[i]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[n[i]+"CancelAnimationFrame"]||t[n[i]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(n){var i=(new Date).getTime(),r=Math.max(0,16-(i-e)),a=t.setTimeout(function(){n(i+r)},r);return e=i+r,a}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}function r(){if("object"==typeof Modernizr&&Modernizr.csstransforms3d)return!0;if(!t.getComputedStyle)return!1;var i=e.createElement("p"),r,a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};e.body.insertBefore(i,null);for(var o in a)i.style[o]!==n&&(i.style[o]="translate3d(1px,1px,1px)",r=t.getComputedStyle(i).getPropertyValue(a[o]));return e.body.removeChild(i),r!==n&&r.length>0&&"none"!==r}function a(t,e){this.element=t,m=!1,this.options=$.extend({},h,e),this._defaults=h,this._name=o,this.init(t)}var o="tyParallax",s=$(t),m=!1,h={fullHeight:!0,speed:1.5,backgrounds:!0,parallaxHeight:"100%"};i(),a.prototype={init:function(t){console.log(this.element),this.updateHeight();var e=this;$cover=$(t).find("img.cover"),$cover.one("load",function(){e.simulateCover(),$(this).fadeIn()}),$cover.complete&&$cover.load(),s.bind("orientationchange, resize",function(){e.updateHeight(),e.simulateCover(),$(this).trigger("scroll")}),s.scroll(function(){e.render()}).trigger("scroll")},simulateCover:function(){var t=s.height(),e=s.width();$img=$(this.element).find("img.cover"),$img.css({width:"auto",height:"100%"}),$img.width()<e&&$img.css({width:"100%","max-height":"initial",height:"auto"}),$img.css({width:"100%",height:"auto"}),$img.height()<t&&$img.css({height:t+"px","max-width":"initial",width:"auto"});var n=-($img.width()-e)/2,i=-($img.height()-t)/2;$img.css("transform","translate("+n+"px,"+i+"px)")},updateHeight:function(){var t=$(this.element);t.height(s.height()),t.find(".ty-background").height(s.height()),$inner=t.find(".ty-inner"),$rand=1+Math.floor(3*Math.random()),m||($inner.hasClass("dark")?$inner.addClass("dark-"+$rand):$inner.addClass("light-"+$rand),m=!0)},render:function(){var e=$(this.element),n=e.find(".ty-background"),i=n.find(".ty-inner"),r=e.offset().top,a=t.scrollY||t.pageYOffset||0,o=s.scrollTop();if(o+s.height()>=r&&o<=r+e.height()){var m=((a-r)/1.3).toFixed(0)+"px";n.css("transform","translate3d(0,"+(r-a)+"px,0)"),i.css("transform","translate3d(0,"+m+",0)")}else n.css("transform","translate3d(0,-9000px,0)")}},$.fn[o]=function(t){return this.each(function(){$.data(this,"plugin_"+o)||$.data(this,"plugin_"+o,new a(this,t))})}}(jQuery,window,document);