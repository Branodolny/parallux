!function($,t,e,i){"use strict";function n(){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var n=(new Date).getTime(),a=Math.max(0,16-(n-e)),r=t.setTimeout(function(){i(n+a)},a);return e=n+a,r}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})}function a(){if("object"==typeof Modernizr&&Modernizr.csstransforms3d)return!0;if(!t.getComputedStyle)return!1;var n=e.createElement("p"),a,r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};e.body.insertBefore(n,null);for(var o in r)n.style[o]!==i&&(n.style[o]="translate3d(1px,1px,1px)",a=t.getComputedStyle(n).getPropertyValue(r[o]));return e.body.removeChild(n),a!==i&&a.length>0&&"none"!==a}function r(t,e){this.element=t,l=!1,this.options=$.extend({},m,e),this._defaults=m,this._name=o,this.init(t)}var o="tyParallax",s=$(t),l=!1,h=!1,m={fullHeight:!0,enableMobile:!1,onImageLoad:"fadeIn"};n(),h=a(),r.prototype={init:function(t){this.options.fullHeight===!1&&$(t).addClass("not-full"),this.updateHeight();var e=this,i=$(t).find("img.cover");i.one("load",function(){e.simulateCover(),$(this).fadeIn()}),i.complete&&i.load(),s.bind("orientationchange, resize",function(){e.updateHeight(),e.simulateCover(),$(this).trigger("scroll")}),h?s.scroll(function(){e.render()}).trigger("scroll"):$(t).find(".parallux-bg").removeClass("fixed")},simulateCover:function(){var t=s.height(),e=s.width(),i=$(this.element).find("img.cover");i.css({width:"auto",height:"100%"}),i.width()<e&&i.css({width:"100%","max-height":"initial",height:"auto"}),i.css({width:"100%",height:"auto"}),i.height()<t&&i.css({height:t+"px","max-width":"initial",width:"auto"});var n=-(i.width()-e)/2,a=-(i.height()-t)/2;i.css("transform","translate("+n+"px,"+a+"px)")},updateHeight:function(){var t=$(this.element),e=t.find(".parallux-inner"),i=1+Math.floor(3*Math.random());this.options.fullHeight?(t.height(s.height()),t.find(".parallux-bg").height(s.height())):t.find(".parallux-bg").height(t.height()),l||(e.hasClass("dark")?e.addClass("dark-"+i):e.addClass("light-"+i),l=!0)},render:function(){var e=$(this.element),i=e.find(".parallux-bg"),n=i.find(".parallux-inner"),a=e.offset().top,r=t.scrollY||t.pageYOffset||0,o=s.scrollTop();if(o+s.height()>=a&&o<=a+e.height()){var l=((r-a)/1.3).toFixed(0)+"px";i.css("transform","translate3d(0,"+(a-r)+"px,0)"),n.css("transform","translate3d(0,"+l+",0)")}else i.css("transform","translate3d(0,-9000px,0)")}},$.fn[o]=function(t){return this.each(function(){$.data(this,"plugin_"+o)||$.data(this,"plugin_"+o,new r(this,t))})}}(jQuery,window,document);