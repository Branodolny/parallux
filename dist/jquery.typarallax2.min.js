!function($,t,e,i){function n(t,e){this.element=t,this.options=$.extend({},s,e),this._defaults=s,this._name=a,this.init()}var a="tyParallax",r=$(t),o=!1,s={fullHeight:!0,speed:1.5,backgrounds:!0,parallaxHeight:"100%"};n.prototype={init:function(){console.log(this.element),this.updateHeight(),this.animationFramePolyfill(),$(this.element).find("img.cover").one("load",function(){var t=r.height(),e=r.width(),i=$(this);i.css({width:"auto",height:"100%"}),i.width()<e&&i.css({width:"100%","max-height":"initial",height:"auto"}),i.css({width:"100%",height:"auto"}),i.height()<t&&i.css({height:t+"px","max-width":"initial",width:"auto"});var n=-(i.width()-e)/2,a=-(i.height()-t)/2;i.css("transform","translate("+n+"px,"+a+"px)"),$(this).fadeIn("slow")}).each(function(){this.complete&&$(this).load()});var e=this;r.bind("orientationchange, resize",function(){e.simulateCover(),e.updateHeight(),e.render.bind(e)}),r.scroll(function(){t.requestAnimationFrame(e.render.bind(e))}).trigger("scroll")},support3d:function(){if("object"==typeof Modernizr&&Modernizr.csstransforms3d)return!0;if(!t.getComputedStyle)return!1;var n=e.createElement("p"),a,r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};e.body.insertBefore(n,null);for(var o in r)n.style[o]!==i&&(n.style[o]="translate3d(1px,1px,1px)",a=t.getComputedStyle(n).getPropertyValue(r[o]));return e.body.removeChild(n),a!==i&&a.length>0&&"none"!==a},simulateCover:function(){var t=r.height(),e=r.width();$("img.cover").each(function(){var i=$(this);i.css({width:"auto",height:"100%"}),i.width()<e&&i.css({width:"100%","max-height":"initial",height:"auto"}),i.css({width:"100%",height:"auto"}),i.height()<t&&i.css({height:t+"px","max-width":"initial",width:"auto"});var n=-(i.width()-e)/2,a=-(i.height()-t)/2;i.css("transform","translate("+n+"px,"+a+"px)")})},animationFramePolyfill:function(){for(var e=0,i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n)t.requestAnimationFrame=t[i[n]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[i[n]+"CancelAnimationFrame"]||t[i[n]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(i){var n=(new Date).getTime(),a=Math.max(0,16-(n-e)),r=t.setTimeout(function(){i(n+a)},a);return e=n+a,r}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){clearTimeout(t)})},updateHeight:function(){var t=$(this.element);t.height(r.height()),t.find(".ty-background").height(r.height()),$inner=t.find(".ty-inner"),$rand=1+Math.floor(3*Math.random()),$inner.hasClass("dark")?$inner.addClass("dark-"+$rand):$inner.addClass("light-"+$rand)},render:function(){var e=$(this.element),i=e.find(".ty-background"),n=i.find(".ty-inner"),a=e.offset().top,o=t.scrollY||t.pageYOffset||0,s=r.scrollTop();if(s+r.height()>=a&&s<=a+e.height()){var h=((o-a)/1.3).toFixed(0)+"px";i.css("transform","translate3d(0,"+(a-o)+"px,0)"),n.css("transform","translate3d(0,"+h+",0)")}else i.css("transform","translate3d(0,-9000px,0)")}},$.fn[a]=function(t){return this.each(function(){$.data(this,"plugin_"+a)||$.data(this,"plugin_"+a,new n(this,t))})}}(jQuery,window,document);